---
import type { ActiveProgram } from "@types";
import Buttons from "./Buttons.astro";
import ChannelDisplay from "./ChannelDisplay.astro";
import Logo from "./Logo.astro";

interface Props {
  channelId: string;
  activeProgram?: ActiveProgram | null;
}

const { activeProgram, channelId } = Astro.props;
---

<nav class="controls">
  <Buttons channelId={channelId} />
  <ChannelDisplay channelId={channelId} activeProgram={activeProgram} />
  <Logo />
</nav>

<style>
  .controls {
    background-color: #222222;
    box-shadow:
      inset 0 4px 16px rgba(255, 255, 255, 0.1),
      inset 0 2px 4px rgba(255, 255, 255, 0.1);
    color: white;
    display: grid;
    grid-template-rows: 1fr;
    grid-template-columns: auto;
    grid-template-areas: "buttons display logo";
    width: 100%;
    user-select: none;
    align-items: center;
    justify-items: space-between;
    gap: 1rem;
    height: 6rem;
    padding-inline: 2rem;
    position: relative;

    @media (width < 900px) {
      padding-inline: 1rem;
      justify-items: center;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr;
      grid-template-areas: "buttons display";

      .logo {
        display: none;
      }
    }

    @media (width < 700px) {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr 1fr;
      grid-template-areas:
        "display"
        "buttons";
      gap: 1rem;
      height: 9.5rem;
      padding-block: 0.8rem;
    }

    &::before,
    &::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    /* Grain */
    &::before {
      background-color: transparent;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 600 600'%3E%3Cfilter id='a'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23a)'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size: 182px;
      opacity: 0.6;
      mix-blend-mode: overlay;
    }

    /* Shadow */
    &::after {
      background-image: linear-gradient(
        to right,
        rgba(0, 0, 0, 0.3),
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent,
        rgba(0, 0, 0, 0.3)
      );
    }
  }
</style>
